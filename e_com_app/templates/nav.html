{% block content %}
{% load static %}    
<style>
  .co{
    margin-left: 20px;
    color: rgb(15, 11, 7);
  }
  .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0; /* remove the gap so it looks seamless */
        }
</style>
    <nav class="navbar navbar-expand-lg  " style="background-color: rgb(30, 45, 73);">
        <div class="container-fluid">
          <a class="navbar-brand fw-bold text-info ms-2 ms-lg-5 ms-md-5" style="font-style: italic;" href="home"><img src="{% static 'image/logo.avif'%}" width="60px" height="50px"></a>
          <button class="navbar-toggler" style=" background-color: rgb(170, 172, 174); border: none;" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon " style="color: brown;"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end align-item-end ms-0" id="navbarNav" style="font-size: 15px; ;">
            <ul class="navbar-nav ">
              <li class="nav-item" >
                <a class="nav-link ms-3 " style="color: white " aria-current="page" href="{% url 'home' %}"><i class="fa-solid fa-house"></i> Home</a>
              </li>
              <li class="nav-item" >
                <a class="nav-link co" style="color: white " aria-current="page" href="{% url 'search' %}"><i class="fa-solid fa-magnifying-glass"></i> Search</a>
              </li>
              {% if request.user.is_authenticated %}
              <li class="nav-item dropdown ms-3">
                <a class="nav-link dropdown-toggle" style="color: white "  href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa-solid fa-user"></i> Profile
                </a>
                <div class="dropdown-menu " aria-labelledby="profileDropdown">
                    <a class="dropdown-item mt-3" href="#"><i class="fa-solid fa-user"></i><span class="fw-bold ms-2">Name: </span> {{ user.username }}</a>
                    <a class="dropdown-item mt-3 mb-3" href="#"><i class="fa-solid fa-envelope"></i> <span class="fw-bold ms-1 ">Email: </span>  {{ user.email }}</a>

                      {% if user.shippingaddress_set.exists %}
                            {% for address in user.shippingaddress_set.all %}
                            <a class="dropdown-item " href="{% url 'edit_shipping_address' address.id %}"><i class="fa-solid fa-address-card"></i><span class="fw-bold ms-1 ">
                              Address: </span>
                              <p>{{ address.address_line_1 }}<br> {{ address.city }}, {{ address.country }}  <i class="fa-solid fa-pen-to-square ms-2"></i></p>                       
                              <a class="dropdown-item " href="#"><i class="fa-solid fa-phone"></i><span class="fw-bold ms-1 ">Phone: </span> {{ address.phone_number }}</a>
                            {% endfor %}
                          {% else %}
                          <a href="{% url 'add_shipping_address' %}" class="ms-3" style=" text-decoration: none; color: black;"><i class="fa-solid fa-address-card"></i><span class="fw-bold ms-1 ">
                            Address: </span>
                            <p class="ms-3"> Add shipping Adress.</p>
                                  </a>
                          {% endif %} </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item text-center" href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket "></i> <span class="mt-3"> Logout</span></a>
                </div>
            </li>
              {% else %}
             
              <li class="nav-item dropdown ms-2">
                <a class="nav-link dropdown-toggle" style="color: white "  href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-sign-in"></i> Login
                </a>
                <div class="dropdown-menu" aria-labelledby="profileDropdown">
                    <a class="dropdown-item" href="{% url 'login' %}"><i class="fa fa-sign-in"></i>  Login</a>
                    <a class="dropdown-item" href="{% url 'reg' %}"><i class="fa-solid fa-registered mt-4"></i>  Register</a>
                   
                </div>
            </li>
              {% endif %}
              <li class="nav-item">
                <a class="nav-link co" style="color:white" href="{% url 'category' %}"><i class="fa-solid fa-list"></i> Category</a>
              </li>
              <li class="nav-item">
                <a class="nav-link  position-relative ms-3" style="color:white" href="{% url 'view_cart' %}"><i class="fa-solid fa-cart-shopping"></i> Cart
                   
                  <!-- <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                  {% if cart.total_items >= 0 %} 
                  {{ cart.total_items }} 
                  {% else %}
                  {{ cart.total_items }} 
                  {% endif %}               
                  </span> -->
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link co" style="color:white" href="{% url 'view_favorites' %}"><i class="fa-regular fa-heart"></i> Favorite</a>
              </li>
              <li class="nav-item">
                <a class="nav-link co" style="color: white" href="{% url 'order_list' %}"><i class="fa-solid fa-bag-shopping"></i> Orders</a>
              </li>
              
              
             
              
            </ul>
          </div>
        </div>
      </nav>
{% endblock %}
